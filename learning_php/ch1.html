<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../styles/styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="../scripts/body_scripts.js"></script>
    <!--TODO:Добавить этот скрипт (выше) на все страницы -->
    <script>$(function(){$("#header").load("../common/header.html");});</script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WD3PT3ZV');</script>
    <!-- End Google Tag Manager -->
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(95750180, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/95750180" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N43FPXHDPN"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-N43FPXHDPN');
    </script>
    <title>Гл. 1. Динамические веб-страницы</title>

</head>



<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WD3PT3ZV"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div id="header"></div>
<h1>Гл. 1. Динамические веб-страницы</h1>

<ol>
    <b>Источники:</b>
    <li>Маклафлин Б. PHP и MySQL. Исчерпывающее руководство. 2-е изд. — СПб.: Питер, 2014. — 544 с.: ил. — (Серия «Бестселлеры O’Reilly»).</li>
    <li>Татро Кевин, Макинтайр Питер. Создаем динамические веб-сайты на PHP. 4-е междунар. изд. — СПб.: Питер,
        2021. — 544 с.: ил. — (Серия «Бестселлеры O’Reilly»).</li>
    <li>Колисниченко Д. Н. Современный сайт на РНР и JavaScript (+CD). — СПб.: Питер, 2009. — 176 с.</li>
    <li>Никсон Р. Создаем динамические веб-сайты с помощью PHP, MySQL, JavaScript, CSS и HTML5. 4-е изд. — СПб.: Питер, 2016. — 768 с.: ил. — (Серия «Бестселлеры O’Reilly»).</li>
</ol>


<h2>Основы, заложенные Бернерсом-Ли</h2>
<p>Начнем с азов. HTTP представляет собой стандарт взаимодействия, регулирующий порядок направления запросов и получения ответов — процесса, происходящего между браузером, запущенным на компьютере конечного пользователя, и веб-сервером.</p>
<p><b>Задача сервера</b> состоит в том, чтобы принять запрос от клиента и попытаться дать на него содержательный ответ, обычно передавая ему запрошенную веб-страницу. Именно поэтому и используется термин <i>«сервер»</i> («обслуживающий»). Партнером, взаимодействующим с сервером, является клиент, поэтому данное понятие применяется как к браузеру, так и к компьютеру, на котором он работает.</p>
<p>Между клиентом и сервером может располагаться ряд других устройств, например маршрутизаторы, модули доступа, шлюзы и т. д. Они выполняют различные задачи по обеспечению безошибочного перемещения запросов и ответов между клиентом и сервером. Как правило, для отправки этой информации используется интернет. Некоторые из этих промежуточных устройств могут также ускорить интернет путем локального сохранения страниц или информации в так называемом кэше, обслуживая затем данное содержимое для клиентов непосредственно из кэша, без постоянного извлечения его из сервера-источника.</p>
<h3>Процедура «запрос—ответ»</h3>
<p>В наиболее общем виде процесс <i>«запрос — ответ»</i> состоит из просьбы браузера или другой платформы к веб-серверу отправить ему веб-страницу и выполнения браузером данной просьбы. После этого браузер занимается отображением или рендерингом страницы.</p>
<img src="imgs/request-responce.png">
При этом соблюдается такая последовательность действий.
<ol>
    <li>Вы вводите в адресную строку браузера <span class="code">http://server.com</span></li>
    <li>Ваш браузер ищет IP-адрес, соответствующий доменному имени <b>server.com</b></li>
    <li>Браузер посылает запрос на главную страницу <b>server.com</b>.</li>
    <li>Запрос проходит по интернету и поступает на веб-сервер <b>server.com</b>.</li>
    <li>Веб-сервер, получивший запрос, ищет веб-страницу на своем жестком диске.</li>
    <li>Сервер извлекает веб-страницу и отправляет ее по обратному маршруту в адрес браузера.</li>
    <li>Браузер отображает веб-страницу</li>
</ol>

<p>При передаче типовой веб-страницы этот процесс также осуществляется для каждого имеющегося на ней объекта: элемента графики, встроенного видео- или Flash-ролика и даже шаблона CSS.</p>
<p>Обратите внимание на то, что на шаге 2 браузер ищет IP-адрес, принадлежащий доменному имени server.com. У каждой машины, подключенной к интернету, включая и ваш компьютер, есть свой IP-адрес. Но, как правило, доступ к веб-серверам осуществляется по именам, таким как google.com. Браузер обращается к вспомогательной интернет-службе, так называемой системе доменных имен (Domain Name System — DNS), чтобы найти связанный с сервером IP-адрес, а затем воспользоваться им для связи с компьютером.</p>
<p>Для динамического сайта эта последовательность действий может принимать следующий вид:</p>
<img src="imgs/dynamic_request-responce.png" alt="">
<ol>
    <li>Вы вводите в адресную строку браузера <span class="code">http://server.com</span>.</li>
    <li>Ваш браузер ищет IP-адрес, соответствующий доменному имени server.com</li>
    <li>Браузер посылает запрос на главную страницу <span class="code">server.com</span></li>
    <li>Запрос проходит по Сети и поступает на веб-сервер <span class="code">server.com</span></li>
    <li>Веб-сервер, получивший запрос, ищет веб-страницу на своем жестком диске.</li>
    <li>Теперь, когда главная страница размещена в его памяти, веб-сервер замечает, что она представлена файлом, включающим в себя PHP-сценарии, и передает страницу интерпретатору PHP</li>
    <li>Интерпретатор PHP выполняет PHP-код.</li>
    <li>Кое-какие фрагменты кода PHP содержат MySQL-инструкции, которые интерпретатор PHP, в свою очередь, передает процессору базы данных MySQL</li>
    <li>База данных MySQL возвращает результаты выполнения инструкции интерпретатору PHP</li>
    <li>Интерпретатор PHP возвращает веб-серверу результаты выполнения кода PHP, а также результаты, полученные от базы данных MySQL</li>
    <li>Веб-сервер возвращает страницу выдавшему запрос клиенту, который отображает эту страницу на экране</li>
</ol>
<p>Также не стоит забывать о JavaScript-коде, который интерпретируется локально на машине клиента.</p>

<h2>Динамические веб-страницы</h2>
<p>Использование PHP существенно упрощает встраивание средств, придающих веб-страницам динамические свойства. Когда страницам присваивается расширение PHP, у них появляется прямой доступ к языку сценариев. Разработчику нужно лишь написать код, похожий на этот:</p>
<pre><code class="language-php">&lt;?php
    echo  "Сегодня" . date('T') . ". ";
?>
// или эквивалентно
Сегодня &lt;?php echo date("l"); ?>. Последние новости.
Последние новости.</code></pre>
<p>Открывающий тег <span class="code">&lt;?php</span> дает веб-серверу разрешение на интерпретацию всего последующего кода вплоть до тега <span class="code">?></span>. Все, что находится за пределами этой конструкции, отправляется клиенту в виде простого HTML. Поэтому текст <i>Последние новости</i> просто выводится в браузер. А внутри PHP-тегов встроенная функция <span class="code">date()</span> отображает текущий день недели, соответствующий системному времени сервера.</p>
<p>Упомянув PHP, не забудем также и о других героях программирования динамических веб-страниц, а именно <b>MySQL</b>, <b>JavaScript</b>, <b>CSS</b>, <b>HTML5</b> и, конечно же, <b>Apache</b>.</p>
<p>В дополнение к модулям PHP и прочим средствам наиболее важными для вас как для веб-программиста будут модули, занимающиеся обеспечением безопасности. В качестве других примеров может послужить модуль <b>Rewrite</b>, позволяющий веб-серверу обрабатывать широкий диапазон типов URL-адресов и перезаписывать их в соответствии с его внутренними требованиями, и модуль <b>Proxy</b>, который можно использовать для обслуживания часто запрашиваемых страниц из кэша, чтобы снизить нагрузку на сервер.</p>
<!--TODO: MB: MARKDOWN PARSER, чтобы писать в теге p разметку текста сразу -->
<p>Истинная красота рождается однако в сочетании всех этих технологий:</p>
<ul>
    <li>PHP занят основной работой на веб-сервере</li>
    <li>MySQL управляет данными</li>
    <li>CSS и JavaScript вместе заботятся о представлении веб-страницы. JavaScript может также взаимодействовать с вашим PHP-кодом на веб-сервере, когда ему нужно что-нибудь обновить (как на сервере, так и на веб-странице)</li>
    <li>И с новыми, высокоэффективными свойствами HTML5, такими как холсты, аудио, видео и геолокация, можно придать вашим веб-страницам более высокую динамичность, интерактивность и мультимедийность</li>
</ul>
<p>Неплохо бы теперь подвести краткий итог всему, что изложено в данной части главы, и рассмотреть процесс, сочетающий в себе некоторые из этих технологий в повседневно использующейся многими сайтами функции асинхронного обмена данными: проверке в процессе регистрации новой учетной записи, не занято ли выбранное имя другим посетителем сайта. Хорошим примером подобного использования технологий может послужить почтовый сервер Gmail. Этот асинхронный процесс состоит из следующих шагов:</p>
<ol>
    <li>Сервер выдает код HTML для создания веб-формы, запрашивающей необходимые данные: имя пользователя, настоящее имя, настоящую фамилию и адрес электронной почты.</li>
    <li>Одновременно с этим сервер вкладывает в HTML JavaScript-код, позволяющий отслеживать содержимое поля ввода имени пользователя и проверять два обстоятельства: введен ли в это поле какой-нибудь текст и был ли фокус ввода перемещен из этого поля по щелчку пользователя на другом поле ввода.</li>
    <li>Как только будет введен текст и фокус ввода перемещен на другой элемент формы, код JavaScript в фоновом режиме передает введенное имя пользователя PHP-сценарию на веб-сервере и ждет ответной реакции.</li>
    <li>Веб-сервер осуществляет поиск имени пользователя и возвращает коду JavaScript ответ, в котором сообщает, было ли уже задействовано такое же имя.</li>
    <li>Затем JavaScript размещает под полем ввода имени пользователя индикатор приемлемости имени пользователя, возможно, в виде зеленой галочки или красного крестика, сопровождая его текстом.</li>
    <li>Если пользователь ввел неприемлемое имя, но все же пытается отправить форму, код JavaScript прерывает отправку и повторно обращает внимание пользователя (возможно, выводя более крупный графический индикатор и (или) открывая окно предупреждения) на необходимость выбора другого имени.</li>
    <li>Усовершенствованная версия этого процесса может даже изучить имя, запрошенное пользователем, и предложить альтернативное доступное на данный момент имя.</li>
</ol>

<h2>Установка сервера, предназначенного для разработки</h2>
<p><b>WAMP</b>, <b>MAMP</b> и <b>LAMP</b> — это сокращения от «Windows, Apache, MySQL и PHP», «Mac, Apache, MySQL и PHP» и «Linux, Apache, MySQL и PHP» соответственно. Данными сокращениями описываются полноценные функциональные установки, используемые для разработки динамических веб-страниц.</p>
<p>Существует несколько доступных WAMP-серверов, каждый из которых предлагает свою, немного отличающуюся от других конфигурацию. Среди различных есплатных вариантов с открытым кодом самым лучшим будет AMPPS.</p>
<p>После установки и запуска <b>AAMPS</b> по адресу <span class="code">localhost</span>, <span class="code">http://127.0.0.1/</span> или <span class="code">file:///C:/Program%20Files/Ampps/www/</span> мы увидим корневой каталог нашего сервера. </p>
<p>Перейдя на страницу <span class="code">http://localhost/ampps/index.php?</span> мы увидим настройки сервера. </p>




</body>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
<script>hljs.highlightAll();</script>
</html>
