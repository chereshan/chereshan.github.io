<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        @import url("https://chereshan.github.io/styles/textbook-style.css");
        @import url("../styles/textbook-style.css");
        @import url("../styles/custom.css");
        @import url("../modules/vs2015.min.css");
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../modules/jquery-3.7.1.min.js"><'+'/script>')</script>
    <script src="../modules/highlight.min.js"></script>
    <script src="../scripts/body_scripts.js"></script>
    <script src="../common/counters_head.js"></script>

    <title>Глава 2. Ветвление, циклы и ошибки</title>
</head>
<body>
<script src="../common/counters_body.js"></script>
<h1>Глава 2. Ветвление, циклы и ошибки</h1>
<h2>Условный оператор</h2>
<h3>Конструкция <span class="code">else if</span></h3>
<p>В JS нет elseif PHP или elif Python, однако допускается использование по тому же назначению конструкции <span class="code">else if</span>:</p>
<pre><code class="language-js">if (a > 100){document.write("a больше 100")}
else if(a &lt; 100){document.write("a меньше 100")}
else{document.write("a равно 100")}</code></pre>
<h3>Тренарный оператор</h3>
<pre><code class="language-javascript">let result = условие ? значение1 : значение2;</code></pre>
<h3>Инструкция switch</h3>
<p>Данная конструкция позволяет выбирать один из многих вариантов кода на выполнение в зависимости от условия (обычно это значение одиночной переменной). Синтаксис команды выглядит следующим образом:</p>
<pre><code class="language-javascript">switch(n) {
  case 1:
    // блок кода 1;
    break;
  case 2:
    // блок кода 2;
    break;

  // .......
  // другие варианты  case
  // .......
  default:
    // блок кода если не подошло ни одно условие;
}</code></pre>



<h2>Циклы</h2>



<h3>Цикл while</h3>
<pre><code class="language-html">&lt;script>
    counter=0
    while (counter &lt; 5)
    {
        document.write("Счетчик: " + counter + "&lt;br>")
        ++counter
    }
&lt;/script></code></pre>
<script>
    if (true){
        let counter=0
        while (counter < 5)
        {
            document.write("Счетчик: " + counter + "<br>")
            ++counter
        }
    }
</script>

<p><span class="code">while(i)</span> – более краткий вариант <span class="code">while(i!= 0)</span>:</p>
<pre><code class="language-javascript">let i = 3;
while(i) { // когда i будет равно 0, условие станет ложным, и цикл остановится
  alert(i);
  i--;
}</code></pre>
    <p>Проверку условия можно разместить под телом цикла, используя специальный синтаксис <span class="code">do..while</span>. Это делается когда необходимо, чтобы цикл выполнил как минимум 1 итерацию. Цикл сначала выполнит тело, а затем проверит условие <span class="code">condition</span>, и пока его значение равно <span class="code">true</span>, он будет выполняться снова и снова.</p>
<pre><code class="language-html">&lt;script>
    count = 1
    do
    {
        document.write(count + " умножить на 7 равно " + count * 7 + "&lt;br>")
    } while (++count &lt;= 4)
&lt;/script></code></pre>
<script>
    if (true){
        let count = 1
        do
        {
            document.write(count + " умножить на 7 равно " + count * 7 + "<br>")
        } while (++count <= 4)
    }
</script>
<!--todo: написать css или шаблон для вывода примеров-->



<h3>Цикл for</h3>
<pre><code class="language-javascript">for (инициализация; условие; модификация) {
  // ... тело цикла ...
}</code></pre>
<p>С первой итерацией выполняется инициализация переменной, по которйо будет осуществляться итерация. Затем при каждом прохождении цикла будет проверяться условие (равно ли оно <span class="code">true</span>). В конце же каждой итерациии будет происходить модификация итерируемой переменной.</p>
<pre><code class="language-html">&lt;script>
    for (count = 1 ; count &lt;= 4 ; ++count)
    {
        document.write(count + " умножить на 7 равно " + count * 7 + "&lt;br>");
    }
&lt;/script></code></pre>
<script>
    if (true){
        for (let count = 1 ; count <= 4 ; ++count)
        {
            document.write(count + " умножить на 7 равно " + count * 7 + "<br>");
        }
    }
</script>
<h3>Обход двумерного массива</h3>
<pre><code>for (let i=0; i&lt;кол-во строк; i++) {
    for (let j=0; j&lt;кол-во столбцов; j++) {
        console.log(arr[i][j]);} }
</code></pre>
<p>Мы также можем задать инициализацию и модификацию через запятую для нескольких переменных, например, так:</p>
<pre><code class="language-js">for (i = 1, j=10 ; i &lt; 10 ; i++, ––j)</code></pre>
<h3>Интсрукции <span class="code">break</span> и <span class="code">continue</span></h3>
<pre><code class="language-html">&lt;script>
    haystack = new Array()
    haystack[17] = "Иголка"
    for (j = 0 ; j &lt; 20 ; ++j)
    {
        if (haystack[j] == "Иголка")
        {
            document.write("&lt;br>- найдена в элементе " + j)
            break
        }
        else document.write(j + ", ")
    }
&lt;/script></code></pre>
<script>
    if (true){
        let haystack = new Array()
        haystack[17] = "Иголка"
        for (j = 0 ; j < 20 ; ++j)
        {
            if (haystack[j] == "Иголка")
            {
                document.write("<br>- найдена в элементе " + j)
                break
            }
            else document.write(j + ", ")
        }
    }
</script>

<pre><code class="language-html">&lt;script>
    haystack = new Array()
    haystack[4] = "Иголка"
    haystack[11] = "Иголка"
    haystack[17] = "Иголка"
    for (j = 0 ; j &lt; 20 ; ++j) {
        if (haystack[j] == "Иголка")
        {
            document.write("&lt;br>- найдена в элементе " + j + "&lt;br>")
            continue
        }
        document.write(j + ", ")
    }
&lt;/script></code></pre>
<script>
    if (true){
        let haystack = new Array()
        haystack[4] = "Иголка"
        haystack[11] = "Иголка"
        haystack[17] = "Иголка"
        for (j = 0 ; j < 20 ; ++j) {
            if (haystack[j] == "Иголка")
            {
                document.write("<br>- найдена в элементе " + j + "<br>")
                continue
            }
            document.write(j + ", ")
        }
    }
</script>

<h2>Ошибки</h2>
<h3>Оператор <span class="code">throw</span></h3>
<p>Приведенный ниже пример демонстрирует проверку входного параметра в рекурсивной функции при вычислении:</p>
<pre><code class="language-js">function testFactorial(inputData) {

    if (inputData == 0) {return 1}
    if (inputData &lt; 0)                             // Проверяем - положительное ли число
        throw "Число не должно быть меньше нуля";    // Если отрицательное - "бросаем" исключение
    return (inputData - 1)?(inputData * testFactorial(inputData - 1)):inputData;
}</code></pre>





<p>В JS перехват ошибок реализован с помощью события <span class="code">onerror</span> и ключевых слов <span class="code">try</span> и <span class="code">catch</span>.</p>
<h3>Событие <span class="code">onerror</span></h3>
<pre><code class="language-html">&lt;script>
onerror = errorHandler
document.writ("Добро пожаловать на этот сайт!") // Преднамеренная ошибка
function errorHandler(message, url, line)
{
    out = "К сожалению, обнаружена ошибка.\n\n";
    out += "Ошибка: " + message + "\n";
    out += "URL: " + url + "\n";
    out += "Строка: " + line + "\n\n";
    out += "Нажмите кнопку OK для продолжения работы. \n\n ";
    document.write(out);
    return true;
}
&lt;/script></code></pre>
<script>
    if (true){
        let onerror = errorHandler
        document.write("Добро пожаловать на этот сайт!") // Преднамеренная ошибка
        let out
        function errorHandler(message, url, line)
        {
            out = "К сожалению, обнаружена ошибка.<br>";
            out += "Ошибка: " + message + "<br>";
            out += "URL: " + url + "<br>";
            out += "Строка: " + line + "<br>";
            out += "Нажмите кнопку OK для продолжения работы. <br>";
            document.write(out);
            return true;
        }
    }
</script>
<p>В первой строке скрипту предписывается использовать новую функцию <span class="code">errorHandler</span>, которая принимает 3 параметра: сообщение, URL-адрес и номер строки. Затем мы преднамеренно допускаем ошибку. </p>


<h3>Ключевые слова <span class="code">try</span>, <span class="code">catch</span> и <span class="code">finally</span></h3>
<pre><code class="language-js">try {
// код, который нужно "попробовать"
// в этом коде может быть брошено исключение
} catch(exception_variable) {
// в этом месте пишется код, который выполняется только в случае обнаружения
// исключения в предыдущем блоке "trу"
// в случае возникновения исключения, в переменную exception_variable будет передан
// код возникшей ошибки, например аргумент оператора throw
} finally {
// Код в этом блоке будет выполнен всегда, независимо от результата завершения блока try:
// и при завершении без ошибки, и при завершении с ошибкой, и при завершении по любому оператору перехода
// (break, continue, return)
}</code></pre>
<pre><code class="language-html">&lt;script>
    try
    {
        request = new XMLHTTPRequest()
    }
    catch(err)
    {
        // Использование другого метода для создания объекта XMLHTTPRequest
    }
&lt;/script></code></pre>

<pre><code class="language-js">// Объявление функции
function testFactorial(inputData) {
  if (inputData < 0)                             // Проверяем - положительное ли число
    throw "Число не должно быть меньше нуля";        // Если отрицательное - "бросаем" исключение
  return (inputData - 1) ? (inputData * testFactorial(inputData - 1)) : inputData;
}

// инициируем переменную для входного параметра, зададим ее вручную в этом примере
var myNumber = -5;  

// начало конструкции обработки ошибок
try {
  document.write(testFactorial(myNumber));      //  попытка вызова функции
} catch(ex) {
  if (ex != "Число не должно быть меньше нуля")     // Проверяем - если исключение не наше
    throw (ex);                                 // то "бросаем" его дальше, как бы пропускаем.
  document.write(ex);                           // вывод строки ошибки если исключение "наше"
}</code></pre>
<pre><code class="language-js">new Error(message);
try {
  throw new Error('Что-то пошло не так!');
} catch (e) {
  console.log(e.name + ': ' + e.message);
}</code></pre>


    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>






</body>
</html>